# PPO with Thermotaxis + Foraging - Large Configuration
# Curriculum level 3: Large-scale foraging with scattered temperature zones
#
# Temperature zone layout:
# - Hot zones: right-center (75,50), top-left (25,75), top-right (80,80)
# - Cold zones: bottom-left (25,25), bottom-right (75,25), top-center (50,85)
#
# Sensory modules (C. elegans neuron references):
# - food_chemotaxis: Food-specific attraction (AWC, AWA neurons)
# - thermotaxis: Temperature sensing (AFD neurons)

max_steps: 2000
brain:
  name: mlpppo
  config:
    actor_hidden_dim: 256
    critic_hidden_dim: 256
    num_hidden_layers: 4
    clip_epsilon: 0.2
    gamma: 0.99
    gae_lambda: 0.95
    value_loss_coef: 0.5
    entropy_coef: 0.02
    learning_rate: 0.001
    rollout_buffer_size: 1024
    num_epochs: 10
    num_minibatches: 4
    max_grad_norm: 0.5
    normalize_advantages: true
    lr_warmup_episodes: 50
    lr_warmup_start: 0.0001
    lr_decay_episodes: 300
    lr_decay_end: 0.0001
    sensory_modules:
      - food_chemotaxis
      - thermotaxis

body_length: 2

reward:
  reward_goal: 2.0
  reward_distance_scale: 0.5
  reward_exploration: 0.05
  penalty_step: 0.005
  penalty_anti_dithering: 0.02
  penalty_stuck_position: 0
  penalty_starvation: 10.0
  stuck_position_threshold: 0
  penalty_boundary_collision: 0.02
  penalty_health_damage: 0.3
  reward_health_gain: 0.2

satiety:
  initial_satiety: 1000.0
  satiety_decay_rate: 0.8
  satiety_gain_per_food: 0.25

environment:
  grid_size: 100
  viewport_size: [11, 11]
  use_separated_gradients: true

  foraging:
    foods_on_grid: 40
    target_foods_to_collect: 20
    min_food_distance: 8
    agent_exclusion_radius: 12
    gradient_decay_constant: 12.0
    gradient_strength: 1.0

  health:
    enabled: true
    max_hp: 150.0
    predator_damage: 0.0
    food_healing: 15.0

  thermotaxis:
    enabled: true
    cultivation_temperature: 20.0
    base_temperature: 20.0     # Temperature at grid center (spawn point)
    gradient_direction: 0.0    # Temperature increases to the right
    gradient_strength: 0.15
    # Hot/cold spots: [x, y, intensity] where intensity is temperature DELTA from base
    # - Hot spots ADD intensity to base temp (e.g., 25.0 → up to 45°C at center)
    # - Cold spots SUBTRACT intensity from base temp (e.g., 25.0 → down to -5°C at center)
    # - Effect decays exponentially with distance (spot_decay_constant controls falloff)
    hot_spots:
      - [75, 50, 25.0]   # Right-center: +25°C intensity (up to 45°C)
      - [25, 75, 20.0]   # Upper-left: +20°C intensity (up to 40°C)
      - [80, 80, 22.0]   # Upper-right: +22°C intensity (up to 42°C)
    cold_spots:
      - [25, 25, 25.0]   # Lower-left: -25°C intensity (down to -5°C)
      - [75, 25, 20.0]   # Lower-right: -20°C intensity (down to 0°C)
      - [50, 85, 18.0]   # Top-center: -18°C intensity (down to 2°C)
    spot_decay_constant: 6.5
    # Rewards/penalties
    comfort_reward: 0.0        # MUST stay 0 (prevents freeze behavior)
    discomfort_penalty: -0.05
    danger_penalty: -0.5
    reward_discomfort_food: 0.3
    # HP damage
    danger_hp_damage: 0.5
    lethal_hp_damage: 6.0
    # Zone thresholds
    comfort_delta: 5.0         # Comfort: 15-25°C
    discomfort_delta: 10.0     # Discomfort: 10-15°C or 25-30°C
    danger_delta: 15.0         # Danger: 5-10°C or 30-35°C
