# Dynamic Foraging with Pursuit Predators - Small Configuration
# Dual-objective: forage while evading predators that actively chase within detection range
# Uses QSNN-PPO (Quantum Spiking Neural Network + PPO) brain architecture
# QSNN actor with surrogate gradients + classical MLP critic + PPO clipped surrogate
#
# Environment: pursuit predators (count 2, speed 0.5, detection_radius 6)
# Health system: max_hp 100, predator_damage 20, food_healing 10
# Sensory modules: food_chemotaxis (4 features), nociception (4 features)

max_steps: 500
brain:
  name: qsnnppo
  config:
    # QLIF network architecture
    num_sensory_neurons: 8
    num_hidden_neurons: 16
    num_motor_neurons: 4
    membrane_tau: 0.9
    threshold: 0.5
    refractory_period: 0
    shots: 1024
    num_integration_steps: 10
    logit_scale: 5.0
    weight_clip: 3.0
    theta_motor_max_norm: 2.0

    # PPO hyperparameters
    gamma: 0.99
    gae_lambda: 0.95
    clip_epsilon: 0.2
    entropy_coef: 0.02
    value_loss_coef: 0.5
    num_epochs: 4
    num_minibatches: 4
    rollout_buffer_size: 512
    max_grad_norm: 0.5

    # Learning rates
    actor_lr: 0.01
    critic_lr: 0.001
    actor_weight_decay: 0.001

    # Critic architecture
    critic_hidden_dim: 64
    critic_num_layers: 2

    # Schedules
    lr_decay_episodes: 400
    lr_min_factor: 0.2

    # Sensory modules
    sensory_modules:
      - food_chemotaxis
      - nociception

body_length: 2

reward:
  reward_goal: 2.0
  reward_distance_scale: 0.5
  reward_exploration: 0.05
  penalty_step: 0.005
  penalty_anti_dithering: 0.02
  penalty_stuck_position: 0
  penalty_starvation: 10.0
  penalty_predator_death: 10.0
  penalty_predator_proximity: 0.15
  stuck_position_threshold: 0
  penalty_boundary_collision: 0.02
  penalty_health_damage: 0.5
  reward_health_gain: 0.1

satiety:
  initial_satiety: 300.0
  satiety_decay_rate: 0.8
  satiety_gain_per_food: 0.2

environment:
  grid_size: 20
  viewport_size: [11, 11]
  use_separated_gradients: true

  foraging:
    foods_on_grid: 6
    target_foods_to_collect: 10
    min_food_distance: 3
    agent_exclusion_radius: 5
    gradient_decay_constant: 8.0
    gradient_strength: 1.0

  predators:
    enabled: true
    count: 2
    speed: 0.5
    movement_pattern: pursuit
    detection_radius: 6
    kill_radius: 0
    gradient_decay_constant: 10.0
    gradient_strength: 1.0

  health:
    enabled: true
    max_hp: 100.0
    predator_damage: 20.0
    food_healing: 10.0

gradient:
  method: clip
