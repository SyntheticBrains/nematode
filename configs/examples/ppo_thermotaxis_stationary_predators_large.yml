# PPO with Thermotaxis + Stationary Predators - Large Configuration
# Curriculum level 3: Challenging large-scale predator avoidance with extreme temperature gradients
#
# This is a multi-objective task combining:
# - Food collection (chemotaxis)
# - Predator avoidance (nociception + mechanosensation)
# - Temperature comfort (thermotaxis)
#
# Stationary predators act as toxic zones with larger damage radius.
# Temperature gradient creates an additional navigation constraint.
#
# Large environment (100x100 grid):
# - Temperature range: -5°C to 45°C with 0.5°C/cell gradient
# - ~20% in comfort zone, ~30% in discomfort, ~50% in danger/lethal
# - 5 stationary predators spread across the grid
# - Significant portions of grid are uninhabitable
#
# Success criteria:
# - Collect target foods AND survive
# - Maintain >40% time in comfort zone
#
# Sensory modules (C. elegans neuron references):
# - food_chemotaxis: Food-specific attraction (AWC, AWA neurons)
# - nociception: Predator avoidance (ASH, ADL neurons)
# - mechanosensation: Physical contact (ALM, PLM, AVM neurons)
# - thermotaxis: Temperature sensing (AFD neurons)

max_steps: 2000
brain:
  name: ppo
  config:
    actor_hidden_dim: 256
    critic_hidden_dim: 256
    num_hidden_layers: 4
    clip_epsilon: 0.2
    gamma: 0.99
    gae_lambda: 0.95
    value_loss_coef: 0.5
    entropy_coef: 0.02
    learning_rate: 0.001
    rollout_buffer_size: 1024
    num_epochs: 10
    num_minibatches: 4
    max_grad_norm: 0.5
    normalize_advantages: true
    sensory_modules:
      - food_chemotaxis
      - nociception
      - mechanosensation
      - thermotaxis

body_length: 2

reward:
  reward_goal: 2.0
  reward_distance_scale: 0.5
  reward_exploration: 0.05
  penalty_step: 0.005
  penalty_anti_dithering: 0.02
  penalty_stuck_position: 0
  penalty_starvation: 10.0
  penalty_predator_death: 10.0
  penalty_predator_proximity: 0.3
  stuck_position_threshold: 0
  penalty_boundary_collision: 0.02
  penalty_health_damage: 1.5
  reward_health_gain: 0.1

satiety:
  initial_satiety: 800.0
  satiety_decay_rate: 1.0
  satiety_gain_per_food: 0.2

environment:
  type: dynamic
  dynamic:
    grid_size: 100
    viewport_size: [11, 11]
    use_separated_gradients: true

    foraging:
      foods_on_grid: 45
      target_foods_to_collect: 50
      min_food_distance: 10
      agent_exclusion_radius: 15
      gradient_decay_constant: 12.0
      gradient_strength: 1.0

    predators:
      enabled: true
      count: 5
      speed: 0.0
      movement_pattern: stationary
      detection_radius: 8
      kill_radius: 0
      damage_radius: 4
      gradient_decay_constant: 5.0
      gradient_strength: 1.2

    health:
      enabled: true
      max_hp: 100.0
      predator_damage: 10.0

    thermotaxis:
      enabled: true
      cultivation_temperature: 20.0
      base_temperature: 20.0  # Temperature at grid center (spawn point)
      gradient_direction: 0.0  # Temperature increases to the right
      gradient_strength: 0.5   # 0.5°C per cell from center (range: -5°C to 45°C)
      comfort_reward: 0.05
      discomfort_penalty: -0.1
      danger_penalty: -0.3
      danger_hp_damage: 2.0
      lethal_hp_damage: 10.0
      # Zone thresholds (relative to cultivation temp)
      comfort_delta: 5.0       # Comfort: 15-25°C
      discomfort_delta: 10.0   # Discomfort: 10-15°C or 25-30°C
      danger_delta: 15.0       # Danger: 5-10°C or 30-35°C
